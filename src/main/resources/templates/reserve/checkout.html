<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="layout/layout">

<th:block layout:fragment="content">
    <!-- ================================
        START BREADCRUMB AREA
    ================================= -->
    <section class="breadcrumb-area breadcrumb-board">
        <div class="breadcrumb-wrap">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="breadcrumb-content text-center">
                            <div class="section-heading">
                                <h2 class="sec__title text-white">CHECKOUT</h2>
                            </div>
                        </div><!-- end breadcrumb-content -->
                    </div><!-- end col-lg-8 -->
                </div><!-- end row -->
            </div><!-- end container -->
        </div><!-- end breadcrumb-wrap -->
        <div class="bread-svg-box">
            <svg class="bread-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 10" preserveAspectRatio="none"><polygon points="100 0 50 10 0 0 0 10 100 10"></polygon></svg>
        </div><!-- end bread-svg -->
    </section><!-- end breadcrumb-area -->
    <!-- ================================
        END BREADCRUMB AREA
    ================================= -->

    <!-- ================================
        START BOOKING AREA
    ================================= -->
    <form method="post" onsubmit="return false">
        <section class="booking-area padding-top-100px padding-bottom-70px">
            <div class="container">
                <div class="row justify-content-md-center">
                    <div class="col-lg-8">
                        <div class="table-form table-responsive mb-3">
                            <table class="table">
                                <thead class="thead-dark">
                                    <tr class="bg-dark">
                                        <th scope="col" class="pl-5" th:text="|숙소|">Product</th>
                                        <th scope="col" class="text-lg-right pr-5"  th:text="|숙소가격|">Price</th>
                                    </tr>
                                </thead>
                                <tbody>

                                <tr th:each="info : ${infoList}">
                                    <th scope="row">
                                        <div class="table-content product-content d-flex align-items-center">
                                            <!--                                    <a href="room-details.html" class="d-block" th:href="@{/room-details}">-->
                                            <!--                                        <img src="/images/room1.jpg" alt="" class="flex-shrink-0">-->
                                            <!--                                    </a>-->
                                            <div class="product-content">
                                                <a href="room-details.html" class="title px-2" th:href="@{/room-details}"
                                                   th:text="${info.getAccomName()}">
                                                    호텔 방 이름</a>
                                                <div class="product-info-wrap">
                                                    <div class="product-info line-height-24 px-2">
                                                        <span class="product-info-label" th:text="${info.getRoomName()}">인원:</span>
                                                    </div><!-- end product-info -->
                                                    <div class="product-info line-height-24 px-2">
                                                        <span class="product-info-label" >예약 일시:</span>
                                                        <span class="product-info-value">
                                                       <span class="product-check-in" th:text="#{checkout_period(${info.getStartDate()}, ${info.getEndDate()}, ${info.getStartWeek()}, ${info.getEndWeek()}, ${info.getUsePeriod()})}">체크타임</span>
                                                    </span>
                                                    </div><!-- end product-info -->
                                                    <div class="product-info line-height-24 px-2">
                                                        <span class="product-info-label" th:text="#{checkout_checkTime(${info.getCheckIn()}, ${info.getCheckOut()})}">추가서비스:</span>
                                                        <input type="hidden" th:name="cartNum" th:value="${info.getCartNum()}" >
                                                    </div><!-- end product-info -->
                                                </div>
                                            </div>
                                        </div>
                                    </th>
                                    <td class="text-lg-right pr-5" th:text="#{checkout_monetary_unit(${#numbers.formatInteger(info.getPrice(), 0, 'COMMA')})}">숙소 가격</td> <!-- 숙소 가격 필드 -->
                                </tr>
                                </tbody>
                            </table>

                        </div>


                        <div class="form-box">
                            <div class="form-title-wrap">
                                <h3 class="title" th:text="#{checkout_booking_submission}">Booking Submission</h3>
                            </div><!-- form-title-wrap -->
                            <div class="form-content ">
                                <div class="contact-form-action">
                                    <div class="row">
                                        <div class="col-lg-12">
                                            <div class="input-box">
                                                <label class="label-text" th:text="#{checkout_name}">Name</label>
                                                <div class="form-group">
                                                    <span class="la la-user form-icon"></span>
                                                    <input class="form-control" id="name" type="text" th:name="name" th:placeholder="#{checkout_placeholder_name}" th:value="${customer.getNickname()}">
                                                </div>
                                            </div>
                                        </div><!-- end col-lg-8 -->

                                        <div class="col-lg-12">
                                            <div class="input-box">
                                                <label class="label-text" th:text="#{checkout_tel}">Phone Number</label>
                                                <div class="form-group">
                                                    <span class="la la-phone form-icon"></span>
                                                    <input class="form-control" id="tel" type="text" th:name="tel" th:placeholder="#{checkout_placeholder_tel}" th:value="${customer.getMemberTel()}">
                                                </div>
                                            </div>
                                        </div><!-- end col-lg-8 -->

                                    </div>
                                </div><!-- end contact-form-action -->
                            </div><!-- end form-content -->
                        </div><!-- end form-box -->

                        <table class="table">
                            <thead class="thead-dark">
                            <tr class="bg-dark">
                                <th scope="col" class="pl-5" th:text="|결제 금액|">Product</th>
                                <th scope="col" class="text-lg-right px-5" th:text="|금액|">Price</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <th scope="row">
                                    <div class="table-content pl-4">
                                        <p class="title">총 예약금액</p>
                                    </div>
                                </th>
                                <td>
                                    <div class="table-content px-2">
                                        <h3 class="title color-text text-lg-right" th:text="#{checkout_monetary_unit(${totalPrice})}">$264</h3>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <th scope="row">
                                    <div class="table-content pl-4" th:text="#{payment_details_discount}">Subtotal</p>
                                    </div>
                                </th>
                                <td>
                                    <div class="table-content px-2">
                                        <h3 class="title color-text text-lg-right">-20,000원</h3>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <th scope="row" class="bg-light bg-opacity-25">
                                    <div class="table-content pl-4">
                                        <p class="title text-color-10" th:text="#{payment_details_total_price}">Order Total</p>
                                    </div>
                                </th>
                                <td class="bg-light bg-opacity-25">
                                    <div class="table-content px-2">
                                        <h3 class="title text-color-10 text-lg-right" th:text="#{checkout_monetary_unit(${totalPrice})}">$240</h3>
                                    </div>
                                </td>
                            </tr>
                            </tbody>
                        </table>

                        <!--                    일단 여기는 나중에 쓰자             -->
                        <!--
                        <div class="form-box">
                            <div class="form-title-wrap">
                                <h3 class="title" th:text="#{checkout_payment_price_and_discount}">Booking Submission</h3>
                            </div>
                            <div class="form-content ">
                                <div class="contact-form-action">
                                    <form method="post">
                                        <div class="row">
                                            <div class="col-lg-12">
                                                <div class="input-box">
                                                    <label class="label-text" th:text="#{checkout_payment_total_reservation_price}">총 예약 금액</label>
                                                    <div class="form-group">
                                                        <span class="la la-user form-icon"></span>
                                                        <input class="form-control" type="text" name="text" th:placeholder="|쿠폰 정보|" th:value="|20000원 할인|">
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-lg-12">
                                                <div class="input-box">
                                                    <label class="label-text" th:text="#{checkout_payment_point}">Point</label>
                                                    <div class="form-group">
                                                        <span class="la la-phone form-icon"></span>
                                                        <input class="form-control" type="text" name="text" th:placeholder="|포인트 정보|" th:value="|10000P|">
                                                    </div>
                                                </div>
                                            </div>
                                            <ul class="col-lg-12">
                                                <div class="float-right">
                                                    <li><span>총 예약 금액:</span>$240</li>
                                                    <li><span>쿠폰 할인:</span>$5</li>
                                                    <li><span>포인트 사용:</span>$5</li>
                                                    <hr class="col-lg-12">
                                                    <li><span>결제 금액:</span></span>$245</li>
                                                </div>
                                            </ul>

                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    -->
                        <div class="form-box">
                            <div class="form-title-wrap">
                                <h3 class="title" th:text="#{checkout_payment_information}">Your Card Information</h3>
                            </div><!-- form-title-wrap -->
                            <div class="form-content">
                                <div class="section-tab check-mark-tab text-center pb-4">
                                    <ul class="nav nav-tabs justify-content-center" id="myTab" role="tablist">
                                        <li class="nav-item col-lg-3 row-cols-1">
                                            <a class="nav-link" id="credit-card-tab" data-toggle="tab" th:name="payment" href="#credit-card" data-value="card" role="tab" aria-controls="credit-card" aria-selected="false">
                                                <i class="la la-check icon-element"></i>
                                                <img src="/images/card.png" alt="">
                                                <span class="d-block pt-2">카드</span>
                                            </a>
                                        </li>
                                        <li class="nav-item col-lg-3 row-cols-1">
                                            <!-- th:onclick="clickOrdersType(this.getAttribute('value'))" value라고 쓰지만 th:value로 했음 value도 되는지는 모르겠다. th를 이용해서 onclick하는방법 -->
                                            <a class="nav-link active" id="vbank-tab" data-toggle="tab" th:name="payment"  href="#vbank" data-value="vbank" role="tab" aria-controls="vbank" aria-selected="true">
                                                <i class="la la-check icon-element"></i>
                                                <img src="/images/vbank.png" alt="">
                                                <span class="d-block pt-2">가상계좌</span>
                                            </a>
                                        </li>
                                        <li class="nav-item col-lg-3 row-cols-1">
                                            <a class="nav-link" id="phone-tab" data-toggle="tab" th:name="payment"  href="#phone" role="tab" data-value="phone" aria-controls="phone" aria-selected="true">
                                                <i class="la la-check icon-element"></i>
                                                <img src="/images/phoneBiling.png" alt="">
                                                <span class="d-block pt-2">핸드폰 결제</span>
                                            </a>
                                        </li>
                                        <!--                                    <li class="nav-item col-lg-3 row-cols-1">-->
                                        <!--                                        <a class="nav-link" id="asf-tab" name="payment" data-toggle="tab" href="#kakaopay" role="tab" data-value="kakaopay" aria-controls="kakaopay" aria-selected="true">-->
                                        <!--                                            <i class="la la-check icon-element"></i>-->
                                        <!--                                            <img src="/images/kakaopay.png" alt="">-->
                                        <!--                                            <span class="d-block pt-2">카카오페이</span>-->
                                        <!--                                        </a>-->
                                        <!--                                    </li>-->
                                    </ul>
                                    <input type="hidden" th:name="ordersType" th:value="vbank">
                                    <br><br>
                                    <button type="submit" class="theme-btn float-right" onclick="requestPay()" th:text="#{checkout_payment_run}">Confirm Booking</button>
                                    <br><br>
                                </div><!-- end section-tab -->
                            </div><!-- end form-content -->
                        </div><!-- end form-box -->
                    </div><!-- end col-lg-8 -->
                </div><!-- end row -->
            </div><!-- end container -->
        </section><!-- end booking-area -->

    </form>

    <!-- ================================
        END BOOKING AREA
    ================================= -->

    <div class="section-block"></div>

    <!-- ================================
        START INFO AREA
    ================================= -->
    <section class="info-area info-bg padding-top-90px padding-bottom-70px">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 responsive-column">
                    <a href="#" class="icon-box icon-layout-2 d-flex">
                        <div class="info-icon flex-shrink-0 bg-rgb text-color-2">
                            <i class="la la-phone"></i>
                        </div><!-- end info-icon-->
                        <div class="info-content">
                            <h4 class="info__title">Need Help? Contact us</h4>
                            <p class="info__desc">
                                Lorem ipsum dolor sit amet, consectetur adipisicing
                            </p>
                        </div><!-- end info-content -->
                    </a><!-- end icon-box -->
                </div><!-- end col-lg-4 -->
                <div class="col-lg-4 responsive-column">
                    <a href="#" class="icon-box icon-layout-2 d-flex">
                        <div class="info-icon flex-shrink-0 bg-rgb-2 text-color-3">
                            <i class="la la-money"></i>
                        </div><!-- end info-icon-->
                        <div class="info-content">
                            <h4 class="info__title">Payments</h4>
                            <p class="info__desc">
                                Lorem ipsum dolor sit amet, consectetur adipisicing
                            </p>
                        </div><!-- end info-content -->
                    </a><!-- end icon-box -->
                </div><!-- end col-lg-4 -->
                <div class="col-lg-4 responsive-column">
                    <a href="#" class="icon-box icon-layout-2 d-flex">
                        <div class="info-icon flex-shrink-0 bg-rgb-3 text-color-4">
                            <i class="la la-times"></i>
                        </div><!-- end info-icon-->
                        <div class="info-content">
                            <h4 class="info__title">Cancel Policy</h4>
                            <p class="info__desc">
                                Lorem ipsum dolor sit amet, consectetur adipisicing
                            </p>
                        </div><!-- end info-content -->
                    </a><!-- end icon-box -->
                </div><!-- end col-lg-4 -->
            </div><!-- end row -->
        </div><!-- end container -->
    </section><!-- end info-area -->
    <!-- ================================
        END INFO AREA
    ================================= -->

    <!-- ================================
        START CTA AREA
    ================================= -->
    <section class="cta-area subscriber-area section-bg-2 padding-top-60px padding-bottom-60px">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-7">
                    <div class="section-heading">
                        <p class="sec__desc text-white-50 pb-1">Newsletter sign up</p>
                        <h2 class="sec__title font-size-30 text-white">Subscribe to Get Special Offers</h2>
                    </div><!-- end section-heading -->
                </div><!-- end col-lg-7 -->
                <div class="col-lg-5">
                    <div class="subscriber-box">
                        <div class="contact-form-action">
                            <form action="#">
                                <div class="input-box">
                                    <label class="label-text text-white">Enter email address</label>
                                    <div class="form-group mb-0">
                                        <span class="la la-envelope form-icon"></span>
                                        <input class="form-control" type="email" placeholder="Email address">
                                        <button class="theme-btn theme-btn-small submit-btn" type="submit">Subscribe</button>
                                        <span class="font-size-14 pt-1 text-white-50"><i class="la la-lock mr-1"></i>Don't worry your information is safe with us.</span>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div><!-- end section-heading -->
                </div><!-- end col-lg-5 -->
            </div><!-- end row -->
        </div><!-- end container -->
    </section><!-- end cta-area -->
    <!-- ================================
        END CTA AREA
    ================================= -->

    <!-- start back-to-top -->
    <div id="back-to-top">
        <i class="la la-angle-up" title="Go top"></i>
    </div>
    <!-- end back-to-top -->

    <!-- end modal-shared -->
    <div class="modal-popup">
        <div class="modal fade" id="signupPopupForm" tabindex="-1" role="dialog"  aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <div>
                            <h5 class="modal-title title" id="exampleModalLongTitle">회원가입</h5>
                            <p class="font-size-14">안녕하세요! 회원가입을 환영합니다.</p>
                        </div>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true" class="la la-close"></span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="contact-form-action">
                            <form method="post" action="/member/join">
                                <div class="input-box">
                                    <label class="label-text">닉네임</label>
                                    <div class="form-group">
                                        <span class="la la-user form-icon"></span>
                                        <input class="form-control" type="text" name="nickname" placeholder="닉네임">
                                    </div>
                                </div><!-- end input-box -->
                                <div class="input-box">
                                    <label class="label-text">이메일 주소</label>
                                    <div class="form-group">
                                        <span class="la la-envelope form-icon"></span>
                                        <input class="form-control" type="email" name="email" placeholder="이메일 주소">
                                    </div>
                                </div><!-- end input-box -->
                                <div class="input-box">
                                    <label class="label-text">패스워드</label>
                                    <div class="form-group">
                                        <span class="la la-lock form-icon"></span>
                                        <input class="form-control" type="password" name="pwd" placeholder="패스워드">
                                    </div>
                                </div><!-- end input-box -->
                                <!--                                    <div class="input-box">-->
                                <!--                                        <label class="label-text">패스워드 확인</label>-->
                                <!--                                        <div class="form-group">-->
                                <!--                                            <span class="la la-lock form-icon"></span>-->
                                <!--                                            <input class="form-control" type="password" name="text" placeholder="패스워드 재입력">-->
                                <!--                                        </div>-->
                                <!--                                    </div>&lt;!&ndash; end input-box &ndash;&gt;-->
                                <div class="btn-box pt-3 pb-4">
                                    <button type="submit" class="theme-btn w-100">회원가입</button>
                                </div>
                                <div class="action-box text-center">
                                    <p class="font-size-14">SNS를 통한 회원가입</p>
                                    <ul class="social-profile py-3">
                                        <li><a href="#" class="bg-5 text-white"><i class="lab la-facebook-f"></i></a></li>
                                        <li><a href="#" class="bg-6 text-white"><i class="lab la-twitter"></i></a></li>
                                        <li><a href="#" class="bg-7 text-white"><i class="lab la-instagram"></i></a></li>
                                        <li><a href="#" class="bg-5 text-white"><i class="lab la-linkedin-in"></i></a></li>
                                    </ul>
                                </div>
                            </form>
                        </div><!-- end contact-form-action -->
                    </div>
                </div>
            </div>
        </div>
    </div><!-- end modal-popup -->

    <!-- end modal-shared -->
    <div class="modal-popup">
        <div class="modal fade" id="loginPopupForm" tabindex="-1" role="dialog"  aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <div>
                            <h5 class="modal-title title" id="exampleModalLongTitle2">로그인</h5>
                            <p class="font-size-14">안녕하세요! 로그인을 환영합니다.</p>
                        </div>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true" class="la la-close"></span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="contact-form-action">
                            <div class="input-box">
                                <label class="label-text">이메일</label>
                                <div class="form-group">
                                    <span class="la la-envelope form-icon"></span>
                                    <input class="form-control" type="text"  placeholder="이메일 주소">
                                </div>
                            </div><!-- end input-box -->
                            <div class="input-box">
                                <label class="label-text">패스워드</label>
                                <div class="form-group mb-2">
                                    <span class="la la-lock form-icon"></span>
                                    <input class="form-control" type="text" placeholder="패스워드">
                                </div>
                                <div class="d-flex align-items-center justify-content-between">
                                    <!--                                    <div class="custom-checkbox mb-0">-->
                                    <!--                                        <input type="checkbox" id="rememberchb">-->
                                    <!--                                        <label for="rememberchb">Remember me</label>-->
                                    <!--                                    </div>-->
                                    <p class="forgot-password">
                                        <a href="recover">비밀번호를 잊으셨나요?</a>
                                    </p>
                                </div>
                            </div><!-- end input-box -->
                            <div class="btn-box pt-3 pb-4">
                                <button type="button" class="theme-btn w-100">로그인</button>
                            </div>
                            <div class="action-box text-center">
                                <p class="font-size-14">SNS를 통한 로그인</p>
                                <ul class="social-profile py-3">
                                    <li><a href="#" class="bg-5 text-white"><i class="lab la-facebook-f"></i></a></li>
                                    <li><a href="#" class="bg-6 text-white"><i class="lab la-twitter"></i></a></li>
                                    <li><a href="#" class="bg-7 text-white"><i class="lab la-instagram"></i></a></li>
                                    <li><a href="#" class="bg-5 text-white"><i class="lab la-linkedin-in"></i></a></li>
                                </ul>
                            </div>
                        </div><!-- end contact-form-action -->
                    </div>
                </div>
            </div>
        </div>
    </div><!-- end modal-popup -->

    <script th:inline="javascript">

        const payTab = document.querySelectorAll(`[name='payment']`);
        let pay_method = 'vbank';
        payTab.forEach(type => type.addEventListener('click',() => {
            pay_method = type.getAttribute("data-value");
            document.querySelectorAll("ordersType")[0].value = pay_method;
            console.log(pay_method);
        }))

        const name  = [[${infoList.get(0).getAccomName()}]];
        // const buyer_name = [[${customer.getNickname()}]];
        // const buyer_tel = [[${customer.getMemberTel()}]];
        const merchant_uid = [[${customer.getNum()}]] + new Date().getTime();
        const amount = Number([[${totalPrice}]]);
        const buyer_email = [[${customer.getEmail()}]];



        const buyer_addr = [[${infoList.get(0).getAccomRegion()}]];
        const buyer_postcode = '123-456';

    </script>



</th:block>

</html>